name: Update artifacts.json

on:
  workflow_dispatch:
    # inputs:
    #   scope:
    #     description: "Scope of artifacts.json file to update"
    #     required: false
    #     default: "infra"
    #   type:
    #     description: "Artifact's type"
    #     required: false
    #     default: "docker"
    #   artifact-name:
    #     description: "Artifact's name"
    #     required: false
    #   artifact-tag:
    #     description: "Artifact's tag"
    #     required: false
  workflow_call:
    # inputs:
    #   scope:
    #     description: "Scope of artifacts.json file to update"
    #     required: false
    #     default: "infra"
    #   type:
    #     description: "Artifact's type"
    #     required: false
    #     default: "docker"
    #   artifact-name:
    #     description: "Artifact's name"
    #     required: false
    #   artifact-tag:
    #     description: "Artifact's tag"
    #     required: false
  push:
    branches:
      - master

jobs:
  update-artifacts-json:
    runs-on: ubuntu-latest
    steps:
      # - name: Update artifacts.json
      #   uses: ./actions/update-artifacts-file
      #   with:
      #     # scope: ${{ github.event.inputs.scope }}
      #     # type: ${{ github.event.inputs.type }}
      #     # artifact-name: ${{ github.event.inputs['artifact-name'] }}
      #     # artifact-tag: ${{ github.event.inputs['artifact-tag'] }}
      #     # token: ${{ secrets.GH_PAT }}
      #     repository: MapColonies/actions
      #     # registry: ${{ secrets.ACR_URL }}
      #     # context: .github/workflows/infra
      - name: Update artifacts.json
        uses: ./actions/update-artifacts-file
        with:
          context: actions/update-artifacts-file
          repository: MapColonies/actions